<Window x:Class="M3UMediaOrganizer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="M3U Media Organizer - Download"
        Height="820" Width="1590"
        WindowStartupLocation="CenterScreen">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Row 0 -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,8">
            <Button x:Name="BtnOpenM3U" Content="Ouvrir M3U..." Width="120" Margin="0,0,10,0" Click="BtnOpenM3U_Click"/>
            <TextBlock Text="Fichier :" VerticalAlignment="Center"/>
            <TextBox x:Name="TxtM3UPath" Width="520" Margin="8,0,18,0" IsReadOnly="True"/>
            <TextBlock Text="Recherche :" VerticalAlignment="Center"/>
            <TextBox x:Name="TxtSearch" Width="320" Margin="8,0,18,0" TextChanged="TxtSearch_TextChanged"/>
            <CheckBox x:Name="ChkHideExisting" Content="Masquer déjà présents" VerticalAlignment="Center" Margin="0,0,12,0"
                      Click="ChkHideExisting_Click"/>
        </StackPanel>

        <!-- Row 1 -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,0,0,8">
            <Button x:Name="BtnPickRoot" Content="Dossier de téléchargement..." Width="190" Margin="0,0,10,0" Click="BtnPickRoot_Click"/>
            <TextBlock Text="Root :" VerticalAlignment="Center"/>
            <TextBox x:Name="TxtRoot" Width="256" Margin="8,0,18,0" IsReadOnly="True"/>

            <TextBlock Text="Type :" VerticalAlignment="Center"/>
            <ComboBox x:Name="CmbType" Width="170" Margin="8,0,18,0" SelectionChanged="CmbType_SelectionChanged">
                <ComboBoxItem Content="Tout afficher" IsSelected="True"/>
                <ComboBoxItem Content="Films + Séries"/>
                <ComboBoxItem Content="Séries"/>
                <ComboBoxItem Content="Films"/>
            </ComboBox>

            <TextBlock Text="Genre :" VerticalAlignment="Center"/>
            <ComboBox x:Name="CmbGenre" Width="260" Margin="8,0,18,0" IsTextSearchEnabled="True"
                      SelectionChanged="CmbGenre_SelectionChanged">
                <ComboBoxItem Content="Tous genres" IsSelected="True"/>
            </ComboBox>

            <Button x:Name="BtnSelectAll" Content="Tout sélectionner" Width="130" Margin="0,0,8,0" Click="BtnSelectAll_Click"/>
            <Button x:Name="BtnSelectOnly" Content="Sélectionner la sélection" Width="210" Margin="0,0,8,0" Click="BtnSelectOnly_Click"/>
            <Button x:Name="BtnSelectNone" Content="Tout désélectionner" Width="150" Click="BtnSelectNone_Click"/>
        </StackPanel>

        <!-- Row 2 -->
        <DataGrid Grid.Row="2" x:Name="GridItems"
                  AutoGenerateColumns="False" CanUserAddRows="False" IsReadOnly="False"
                  SelectionMode="Extended" HeadersVisibility="Column" GridLinesVisibility="Horizontal"
                  EnableRowVirtualization="True" EnableColumnVirtualization="True"
                  VirtualizingPanel.IsVirtualizing="True"
                  VirtualizingPanel.VirtualizationMode="Recycling"
                  ScrollViewer.IsDeferredScrollingEnabled="True"
                  ColumnWidth="SizeToHeader">
            <DataGrid.Columns>
                <DataGridCheckBoxColumn Binding="{Binding Selected, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                        Header="✓" Width="35" MinWidth="35"/>
                <DataGridTextColumn Binding="{Binding MediaType}" Header="Type" Width="70" MinWidth="70" IsReadOnly="True"/>
                <DataGridTextColumn Binding="{Binding GroupTitle}" Header="group-title" Width="220" MinWidth="160" IsReadOnly="True"/>
                <DataGridTextColumn Binding="{Binding Title}" Header="Titre" Width="2*" MinWidth="260" IsReadOnly="True"/>
                <DataGridTextColumn Binding="{Binding Ext}" Header="Ext" Width="70" MinWidth="60" IsReadOnly="True"/>
                <DataGridCheckBoxColumn Binding="{Binding Exists}" Header="Déjà là" Width="80" MinWidth="70" IsReadOnly="True"/>
                <DataGridTextColumn Binding="{Binding TargetPath}" Header="Chemin fichier" Width="3*" MinWidth="450" IsReadOnly="True"/>
                <DataGridTextColumn Binding="{Binding Status}" Header="Statut" Width="*" MinWidth="220" IsReadOnly="True"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- Row 3 -->
        <StackPanel Grid.Row="3" Orientation="Vertical" Margin="0,8,0,0">
            <TextBlock x:Name="LblM3UProgress" Text="Chargement M3U : -" Margin="0,0,0,4"/>
            <ProgressBar x:Name="PbM3U" Height="16" Minimum="0" Maximum="100" Value="0"/>
        </StackPanel>

        <!-- Row 4 -->
        <Grid Grid.Row="4" Margin="0,10,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0" Orientation="Vertical">
                <TextBlock x:Name="LblDlFile" Text="Téléchargement fichier : -" Margin="0,0,0,4"/>
                <ProgressBar x:Name="PbDlFile" Height="16" Minimum="0" Maximum="100" Value="0"/>

                <TextBlock x:Name="LblDlAll" Text="Téléchargement global : -" Margin="0,8,0,4"/>
                <ProgressBar x:Name="PbDlAll" Height="16" Minimum="0" Maximum="100" Value="0"/>
            </StackPanel>

            <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right" Margin="12,0,0,0">
                <Button x:Name="BtnRecalc" Content="Recalculer chemins" Width="160" Margin="0,0,8,0" Click="BtnRecalc_Click"/>
                <Button x:Name="BtnDownload" Content="Télécharger sélection" Width="170" Margin="0,0,8,0" Click="BtnDownload_Click"/>
                <Button x:Name="BtnCancel" Content="Annuler" Width="100" IsEnabled="False" Click="BtnCancel_Click"/>
            </StackPanel>
        </Grid>
    </Grid>
</Window>